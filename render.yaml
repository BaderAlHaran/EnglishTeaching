services:
  - type: web
    name: essay-writing-service
    env: python
    pythonVersion: 3.11.9
    buildCommand: |
      apt-get update && apt-get install -y p7zip-full
      pip install -r requirements.txt
      pip install gdown
      echo "Downloading grammar model..."
      gdown "https://drive.google.com/uc?id=1NfUxs8UBJNmqOfV2k_5NAZLyAnPjDr6B" -O /opt/render/project/src/grammar_model.7z
      echo "Creating grammar_model directory..."
      mkdir -p /opt/render/project/src/grammar_model
      echo "Extracting grammar model..."
      7z x /opt/render/project/src/grammar_model.7z -o/opt/render/project/src/grammar_model
      echo "Listing extracted files:"
      ls -la /opt/render/project/src/grammar_model
    startCommand: gunicorn wsgi:app --bind 0.0.0.0:$PORT
    plan: free
    envVars:
      - key: FLASK_ENV
        value: production
      - key: SECRET_KEY
        generateValue: true
      - key: ADMIN_USERNAME
        value: mikoandnenoarecool
      - key: ADMIN_PASSWORD
        generateValue: true
      - key: ADMIN_EMAIL
        value: admin@essaywritingservice.com
      - key: CONTACT_RECIPIENT
        value: norakalmutairi@gmail.com
      - key: UPLOAD_FOLDER
        value: uploads
      - key: CUSTOM_DOMAIN
        sync: false
      - key: SMTP_HOST
        sync: false
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USER
        sync: false
      - key: SMTP_PASS
        sync: false
      - key: SMTP_USE_TLS
        value: "true"
